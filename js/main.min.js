"use strict";var dropToggle=document.querySelectorAll('[data-dropdown="toggle"]'),filters=document.getElementById("filters"),filterToggle=document.querySelector(".where__filter"),result=document.querySelector(".where__result"),where=document.querySelector(".where");dropToggle.forEach((function(e){e.addEventListener("click",(function(e){var t=this;e.preventDefault(),this.closest(".where__time")?this.classList.toggle("active"):(this.classList.toggle("active"),dropToggle.forEach((function(e){t!==e&&e.classList.remove("active")})),this.closest(".where__time")||(this.closest(".where__result-item").classList.toggle("active"),document.querySelectorAll(".where__result-item").forEach((function(e){t.closest(".where__result-item")!==e&&e.classList.remove("active")}))))}))})),filterToggle.addEventListener("click",(function(e){e.preventDefault(),$(".not-found").addClass("d-none"),$(this).hasClass("active")?(this.classList.remove("active"),filters.classList.add("d-none"),result.classList.remove("d-none"),showMap.classList.remove("d-none")):(this.classList.add("active"),filters.classList.remove("d-none"),result.classList.add("d-none"),showMap.classList.add("d-none"))}));var showList=document.querySelector(".show-list"),showMap=document.querySelector(".show-map");showList.addEventListener("click",(function(e){e.preventDefault(),where.classList.remove("map-active"),where.classList.add("list-active")})),showMap.addEventListener("click",(function(e){e.preventDefault(),where.classList.remove("list-active"),where.classList.add("map-active")}));var search=document.getElementById("where-do-search");search.addEventListener("input",(function(){var e=this.closest(".where__search");""!==this.value?e.classList.add("active"):e.classList.remove("active")}));var data=[{coordX:"55.661574",coordY:"37.573856",name:"Москва, Льва Толстого 16",id:"1"},{coordX:"55.792000",coordY:"37.506800",name:"Москва, улица Зорге, 28к1",id:"22"},{coordX:"55.749962",coordY:"37.606703 ",name:"Москва, улица Знаменка, 8/13",id:"3"}];function init(){var e=new ymaps.Map("map",{center:[55.733974,37.587093],zoom:8},{searchControlProvider:"yandex#search"});function t(e){e.preventDefault(),document.getElementById("filter-form").reset()}function s(t){var s,a=new ymaps.GeoQueryResult;$(".where__result .where__result-item.filtering").filter((function(){if($(this).find(".where__title span").text().toLowerCase().indexOf(t)>-1){var e=$(this).find(".where__title").attr("data-place");a=myObjects.search("options.id = ".concat(e)).add(a)}$(this).toggle($(this).find(".where__title span").text().toLowerCase().indexOf(t)>-1)})),0===a._objects.length?$(".not-found").removeClass("d-none"):($(".not-found").addClass("d-none"),$(".where__result").removeClass("d-none")),s=a.addToMap(e),myObjects.remove(s).removeFromMap(e)}$(".where__title").click((function(){var e,t;e=$(this).attr("data-place"),t=new ymaps.GeoQueryResult,ymaps.ready&&(t=myObjects.search("options.id = ".concat(e)).add(t),myObjects.setOptions({iconImageHref:"img/metka-black.png"}),t.setOptions({iconImageHref:"img/metka-red.png"}))})),$("#where-do-search").on("keyup",(function(){s($(this).val().toLowerCase()),$(".where__filter").removeClass("active"),$("#filters").addClass("d-none"),result.classList.remove("d-none"),showMap.classList.remove("d-none")})),$(".where__search-clear").click((function(e){$("#where-do-search")[0].value="",$(".where__search").removeClass("active"),s($("#where-do-search")[0].value),$(".where__filter").removeClass("active"),$("#filters").addClass("d-none"),t(e),$(".where__result-item").each((function(){$(this).removeClass("d-none"),$(this).addClass("filtering")})),a(),r()}));var a=function(t){for(var s,a=new ymaps.GeoQueryResult,r=$(".checkbox--text").find("input:checked"),o=$(".checkbox--check").find("input:checked"),i=[],n=0;n<r.length;n++){var c=r[n];if(c.checked=!0){var l=c.getAttribute("data-id");i.push(l)}}for(var d=0;d<o.length;d++){var h=o[d];if(h.checked=!0){var f=h.getAttribute("data-id");i.push(f)}}for(var u=0;u<i.length;u++){var m=i[u];a=myObjects.search("options.id = ".concat(m)).add(a)}0==$(".checkbox--text").find("input:checked").length&&0==$(".checkbox--check").find("input:checked").length&&(a=myObjects),0==i.length?($(".selected-filters").addClass("selected-disable"),$(".selected-filters")[0].innerText="ничего не выбрано"):($(".selected-filters").removeClass("selected-disable"),$(".selected-filters")[0].innerText="Показать ".concat(a._objects.length," центров"));var v=r.length+o.length;v?($(".where__filter-icon").hide(),$(".where__filter-counts").removeClass("d-none"),$(".where__filter-counts")[0].innerText=v,$(".cancel-filters span")[0].innerText="Сбросить всё",$(".cancel-filters").addClass("clear-filter"),$(".where__result-item").each((function(e){$(this).addClass("d-none"),$(this).removeClass("filtering");for(var t=0;t<i.length;t++){var s=i[t];$(this).attr("data-id")===s&&($(this).removeClass("d-none"),$(this).addClass("filtering"))}}))):($(".cancel-filters span")[0].innerText="Отменить",$(".cancel-filters").removeClass("clear-filter"),$(".where__filter-icon").show(),$(".where__filter-counts").addClass("d-none")),s=a.addToMap(e),myObjects.remove(s).removeFromMap(e)};function r(){$(".where__filter").removeClass("active"),$("#filters").addClass("d-none"),$(".where__result").removeClass("d-none")}$(".selected-filters").click((function(){r(),$(".show-map").removeClass("d-none"),$(".show-list").addClass("d-none")})),$(".cancel-filters").click((function(e){t(e),a(),r(),$(".show-map").removeClass("d-none"),$(".show-list").addClass("d-none"),$(".where__result-item").each((function(){$(this).removeClass("d-none"),$(this).addClass("filtering")}))})),$(".checkbox--text").on("input",(function(){a()})),$(".checkbox--check").on("input",(function(){a()}));for(var o=[],i=0;i<data.length;i++){var n=data[i];o.push({type:"Feature",properties:{hintContent:n.name},geometry:{type:"Point",coordinates:[n.coordX,n.coordY]},options:{iconLayout:"default#image",iconImageHref:"img/metka-black.png",iconImageSize:[18,21],iconImageOffset:[-8,-8],id:n.id,forSearch:n.name,okrug:n.okrug}})}window.myObjects=ymaps.geoQuery({type:"FeatureCollection",features:o}).addToMap(e)}ymaps.ready(init);
//# sourceMappingURL=main.min.js.map
