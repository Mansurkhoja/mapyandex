"use strict";if(document.querySelector(".where")){var dropToggle=document.querySelectorAll('[data-dropdown="toggle"]'),filters=document.getElementById("filters"),filterToggle=document.querySelector(".where__filter"),_result=document.querySelector(".where__result"),where=document.querySelector(".where");dropToggle.forEach((function(e){e.addEventListener("click",(function(e){var t=this;e.preventDefault(),this.closest(".where__time")?this.classList.toggle("active"):(this.classList.toggle("active"),dropToggle.forEach((function(e){t!==e&&e.classList.remove("active")})),this.closest(".where__time")||(this.closest(".where__result-item").classList.toggle("active"),document.querySelectorAll(".where__result-item").forEach((function(e){t.closest(".where__result-item")!==e&&e.classList.remove("active")}))))}))})),filterToggle.addEventListener("click",(function(e){e.preventDefault(),$(".not-found").addClass("d-none"),$(this).hasClass("active")?(this.classList.remove("active"),filters.classList.add("d-none"),_result.classList.remove("d-none"),_showMap.classList.remove("d-none")):(this.classList.add("active"),filters.classList.remove("d-none"),_result.classList.add("d-none"),_showMap.classList.add("d-none"))}));var showList=document.querySelector(".show-list"),_showMap=document.querySelector(".show-map");showList.addEventListener("click",(function(e){e.preventDefault(),where.classList.remove("map-active"),where.classList.add("list-active")})),_showMap.addEventListener("click",(function(e){e.preventDefault(),where.classList.remove("list-active"),where.classList.add("map-active"),showList.classList.remove("d-none")}));var search=document.getElementById("where-do-search");search.addEventListener("input",(function(){var e=this.closest(".where__search");""!==this.value?e.classList.add("active"):e.classList.remove("active")})),ymaps.ready(init)}var data=[{coordX:"55.661574",coordY:"37.573856",name:"Москва, Льва Толстого 16",id:"1"},{coordX:"55.792000",coordY:"37.506800",name:"Москва, улица Зорге, 28к1",id:"22"},{coordX:"55.749962",coordY:"37.606703 ",name:"Москва, улица Знаменка, 8/13",id:"3"}];function init(){var e=new ymaps.Map("map",{center:[55.733974,37.587093],zoom:8},{searchControlProvider:"yandex#search"});function t(e){var t=new ymaps.GeoQueryResult;ymaps.ready&&(t=myObjects.search("options.id = ".concat(e)).add(t),myObjects.setOptions({iconImageHref:"img/metka-black.png"}),t.setOptions({iconImageHref:"img/metka-red.png"}))}function s(e){e.preventDefault(),document.getElementById("filter-form").reset()}function a(t){var s,a=new ymaps.GeoQueryResult;$(".where__result .where__result-item.filtering").filter((function(){if($(this).find(".where__title span").text().toLowerCase().indexOf(t)>-1){var e=$(this).find(".where__title").attr("data-place");a=myObjects.search("options.id = ".concat(e)).add(a)}$(this).toggle($(this).find(".where__title span").text().toLowerCase().indexOf(t)>-1)})),0===a._objects.length?$(".not-found").removeClass("d-none"):($(".not-found").addClass("d-none"),$(".where__result").removeClass("d-none")),s=a.addToMap(e),myObjects.remove(s).removeFromMap(e)}$(".where__title").click((function(){t($(this).attr("data-place"))})),$("#where-do-search").on("keyup",(function(){a($(this).val().toLowerCase()),$(".where__filter").removeClass("active"),$("#filters").addClass("d-none"),result.classList.remove("d-none"),showMap.classList.remove("d-none")})),$(".where__search-clear").click((function(e){$("#where-do-search")[0].value="",$(".where__search").removeClass("active"),a($("#where-do-search")[0].value),$(".where__filter").removeClass("active"),$("#filters").addClass("d-none"),s(e),$(".where__result-item").each((function(){$(this).removeClass("d-none"),$(this).addClass("filtering")})),o(),i()}));var o=function(t){for(var s,a=new ymaps.GeoQueryResult,o=$(".checkbox--text").find("input:checked"),i=$(".checkbox--check").find("input:checked"),n=[],r=0;r<o.length;r++){var c=o[r];if(c.checked=!0){var l=c.getAttribute("data-id");n.push(l)}}for(var d=0;d<i.length;d++){var h=i[d];if(h.checked=!0){var p=h.getAttribute("data-id");n.push(p)}}for(var u=0;u<n.length;u++){var v=n[u];a=myObjects.search("options.id = ".concat(v)).add(a)}0==$(".checkbox--text").find("input:checked").length&&0==$(".checkbox--check").find("input:checked").length&&(a=myObjects),0==n.length?($(".selected-filters").addClass("selected-disable"),$(".selected-filters")[0].innerText="ничего не выбрано"):($(".selected-filters").removeClass("selected-disable"),$(".selected-filters")[0].innerText="Показать ".concat(a._objects.length," центров"));var f=o.length+i.length;f?($(".where__filter-icon").hide(),$(".where__filter-counts").removeClass("d-none"),$(".where__filter-counts")[0].innerText=f,$(".cancel-filters span")[0].innerText="Сбросить всё",$(".cancel-filters").addClass("clear-filter"),$(".where__result-item").each((function(e){$(this).addClass("d-none"),$(this).removeClass("filtering");for(var t=0;t<n.length;t++){var s=n[t];$(this).attr("data-id")===s&&($(this).removeClass("d-none"),$(this).addClass("filtering"))}}))):($(".cancel-filters span")[0].innerText="Отменить",$(".cancel-filters").removeClass("clear-filter"),$(".where__filter-icon").show(),$(".where__filter-counts").addClass("d-none")),s=a.addToMap(e),myObjects.remove(s).removeFromMap(e)};function i(){$(".where__filter").removeClass("active"),$("#filters").addClass("d-none"),$(".where__result").removeClass("d-none")}$(".selected-filters").click((function(){i(),$(".show-map").removeClass("d-none"),$(".show-list").addClass("d-none")})),$(".cancel-filters").click((function(e){s(e),o(),i(),$(".show-map").removeClass("d-none"),$(".show-list").addClass("d-none"),$(".where__result-item").each((function(){$(this).removeClass("d-none"),$(this).addClass("filtering")}))})),$(".checkbox--text").on("input",(function(){o()})),$(".checkbox--check").on("input",(function(){o()}));for(var n=[],r=0;r<data.length;r++){var c=data[r];n.push({type:"Feature",properties:{hintContent:c.name},geometry:{type:"Point",coordinates:[c.coordX,c.coordY]},options:{iconLayout:"default#image",iconImageHref:"img/metka-black.png",iconImageSize:[18,21],iconImageOffset:[-8,-8],id:c.id,forSearch:c.name,okrug:c.okrug}})}window.myObjects=ymaps.geoQuery({type:"FeatureCollection",features:n}).addToMap(e);for(var l=0;l<data.length;l++){var d=data[l],h=new ymaps.Placemark([d.coordX,d.coordY]);h.options.set("opacity","0"),h.options.set("fillOpacity",0),h.options.set("iconLayout","default#image"),h.options.set("iconImageHref","img/metka-tr.png"),h.options.set("iconImageSize",[18,21]),h.options.set("iconImageOffset",[-8,-8]),h.options.set("id",d.id),h.events.add("click",(function(e){var s=e.get("target").options._options.id;$("[data-id").removeClass("active"),$("[data-place").removeClass("active"),$('[data-id="'.concat(s,'"')).addClass("active"),$('[data-place="'.concat(s,'"')).addClass("active"),t(s)})),e.geoObjects.add(h)}}$((function(){var e={fio:{val:""},tel:{val:""},date:{val:""}};function t(){e.fio.val&&e.tel.val&&e.date.val?$(".pop-up__footer .btn").removeClass("disabled"):$(".pop-up__footer .btn").addClass("disabled")}$("#datepicker").datepicker(),$(".pop-up__input input").keyup((function(){$(this).val().length>0?$(this).addClass("active"):$(this).removeClass("active"),$(this).attr("required")&&(e[$(this).attr("name")].val=$(this).val()),t()})),$(".pop-up__footer .btn").click((function(t){t.preventDefault(),console.log(2),$(".pop-up").addClass("pop-up--success"),$(".pop-up__date")[0].innerText=e.date.val})),$("#datepicker").change((function(){$(this).val().length>0?$(this).addClass("active"):$(this).removeClass("active"),e.date.val=$(this).val(),t()})),$(".pop-up__close").click((function(){$(".pop-up").addClass("d-none"),e.fio.val="",e.tel.val="",e.date.val="",$("body").css("overflow",""),$(".pop-up__input input").each((function(){$(this).removeClass("active")})),$(".pop-up__form")[0].reset(),$(".pop-up").removeClass("pop-up--success")})),$('[data-open="pop-up"]').click((function(e){e.preventDefault();var t=$(this).parent(".where__result-footer").parent(".where__result-content").parent(".where__result-item"),s=t.find(".where__title span")[0].outerText,a=t.find(".where__result-content .where__place")[0].outerText;$(".pop-up__name")[0].innerText=s,$(".pop-up__place")[0].innerText=a,$(".pop-up").removeClass("d-none"),$("body").css("overflow","hidden")}))})),$(".jarallax").jarallax({});
//# sourceMappingURL=main.min.js.map
